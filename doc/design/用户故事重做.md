# 用户故事

前端界面参考 https://oj.lpoj.cn/ 和 https://qduoj.com/ 。
*斜体表示不一定会实现的功能。*

## 用户管理

### 用户认证

- 用户通过邮箱注册*（可以和统一认证绑定）*
  - 用户未登录，右上角提示可以登录或注册
  - 用户点击右上角的注册按钮
  - 弹出表单窗口，用户填写自己的用户名、邮箱、密码和其他信息
  - 表单可以提示用户名是否重复、邮箱是否已被使用等
  - 用户点击确定按钮
  - *转入邮箱验证界面，提示用户已经给邮箱发送邮件，用户通过邮件中的链接确认*
  - 注册成功
- 用户通过统一身份认证登录  *可以和邮箱绑定*
  - 用户未登录，右上角提示可以登录或注册
  - 用户点击右上角的登录按钮
  - 弹出表单窗口，可以选择统一身份认证登录或者用户名/密码登录
  - 用户点击统一身份认证登录按钮，跳转至统一身份认证登录界面
  - 用户填写统一身份认证信息，跳转回登陆界面
  - 如果该学号尚未注册，弹出窗口提示自动创建一个新用户，需要指定用户名，可以指定密码
  - 登录成功
- 用户通过用户名/密码登录
  - 用户未登录，右上角提示可以登录或注册
  - 用户点击右上角的登录按钮
  - 弹出表单窗口，可以选择统一身份认证登录或者用户名/密码登录
  - 用户填写用户名/密码，点击用户名/密码登录按钮
  - 登录成功

### 查看和编辑用户个人信息

- 用户查看自己或他人的用户信息
  - 用户在访问各种网页时，通过超链接跳转至自己或他人的用户信息界面
  - 如果用户未登录，弹出登录窗口，等登录后可以查看
  - 用户也可以通过点击右上角的下拉列表中的个人选项，进入自己的用户信息界面
  - 用户可以在用户信息界面查看自己或他人的公开的个人信息，包括用户名、邮箱、学号等
  - 点击查看提交按钮，转至提交信息界面查看该用户的所有提交
- 用户编辑自己的个人信息
  - 用户点击右上角的下拉列表中的修改个人信息选项，进入用户信息编辑界面
  - 用户可以直接修改*邮箱*、学号等公开信息
  - 用户可以选择修改密码，弹出新窗口，输入原密码和新密码

### 管理员管理用户信息

- 管理员查看用户列表
  - 以管理员身份登录后，导航栏出现管理界面
  - 进入管理界面，查看所有用户的列表
  - 可以按用户名/学号进行排序、过滤等操作
  - 可以添加/删除某个用户
  - 可以批量导入用户
- 管理员查看和编辑用户信息
  - 以管理员身份登录后，查看用户信息时出现编辑按钮
  - 点击编辑按钮，出现个人信息编辑界面
  - 编辑学号等信息，然后保存

## 题目管理

- 用户查看题目列表
  - 用户点击导航栏的题目界面
  - 显示题目列表，用户可以点击查看该题
  - 用户可以通过题目名字或题号搜索题目
- 用户查看题目信息
  - 用户通过超链接进入题目信息界面
  - 可以查看题目的描述信息，包括题目要实现的功能和顶层模块的接口要求
  - 有些易于描述的题目可以直接查看样例
  - 右侧栏上方可以查看该题的其他信息，如创建者、创建日期，截止日期（可以设计为不截止）等
  - 右侧栏下方可以查看提交的统计情况，如通过数/提交数、饼状图等
  - 拖到下方，可以选择查看该题提交信息或是自己提交，转至相应页面
- 管理员添加题目
  - 以管理员身份登录后，题目界面出现添加按钮
  - 点击添加按钮进入题目细节页面
  - 首先填写题目的文字描述（需要图片？）
  - 然后添加测试点，包括仿真测试和*实现测试*
  - 仿真测试需要上传testbench文件，vcd文件，以及其他参数（如仿真时长、是否为样例测试点）。
  - 通过比较vcd比较，完全判断来得到是否一致。
  - *提供一个测试样例，和对应的波形*
  - *实现测试还没想好*
  - 可以添加其他设置，如*可见性设置*
  - 添加成功
- 管理员修改题目
  - 以管理员身份登录后，题目界面出现修改按钮
  - 点击修改按钮，进入题目细节页面
  - 和添加题目一样可以修改文字描述、测试点以及其他设置
  - 修改成功
- 管理员删除题目
  - 以管理员身份登录后，题目界面出现删除按钮
  - 点击删除按钮，确认后删除成功

## 提交信息管理

- 用户查看所有提交
  - 用户点击导航栏的提交信息界面
  - 显示提交信息列表，按照时间倒序排列，可以查看所有用户最近的提交
  - 可以根据用户名和题目进行过滤显示
  - 也可以通过超链接跳转来，利用URL控制过滤选项
  - *可以选择只看自己的提交*
- 用户查看自己的提交细节
  - 如果是自己的提交，可以在提交界面点击后进入提交细节界面
  - 可以查看这一次提交的代码，*多文件情况可以查看每个文件的代码*
  - 可以查看每个测试点的运行情况
    - 对于样例仿真测试点，可以查看样例测试的testbench、错误原因以及*自己程序的波形图*
	- *对于实现测试点，用户可以查看对应的综合图像和对应的性能池*
- 管理员管理提交信息
  - 管理员可以查看任何人的提交细节
  - 在提交细节界面，可以选择对*某个测试点进行重判（可能助教开始写的内容是有错误的，或者判题机得出的结果可能是有错误的）*，也可以直接给该测试点赋予分值
  - 管理员可以删除某次提交

## 编辑、提交、评测功能

- 用户在编辑器界面编辑和提交
  - 用户点击导航栏的编辑按钮，进入编辑器主页面，可以选择之前在做的题目继续编辑
  - 用户也可以通过题目界面下方的编辑按钮，进入编辑界面，查看对应题目之前编写的代码（如果没有则为空）
  - 用户可以编写Verilog代码，查看语法高亮 *目前假定一次写完文件，后续可以添加随时存储的功能*
  - *对多文件题目，可以切换文件*
  - *如果Verilog代码有语法错误，可以查看提示*
  - 用户可以选择样例测试点进行试评测，完成后告知评测结果、*输出波形图*
  - 用户可以点击提交按钮，转至提交细节界面
- 用户上传文件提交
  - 用户通过题目界面下方的直接提交按钮，打开弹窗上传文件，然后点击提交
  - 转至提交细节界面
- 在提交细节界面等待评测
  - 尚未完成评测的时候，显示待评测，并且可以手动刷新
  - 用户等待评测服务器对代码进行评测
  - 评测完成，显示正常的提交细节
